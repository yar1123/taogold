/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("menubutton/menubutton",function(h,e,f,b){var d=e.create(f,{_hideMenu:function(){this.get("view").get("el");this.get("menu").hide();this.get("view").set("collapsed",true)},_showMenu:function(){var a=this.get("view"),c=a.get("el"),g=this.get("menu");if(!g.get("visible")){g.set("align",{node:c,points:["bl","tl"]});g.render();c.attr("aria-haspopup",g.get("view").get("el").attr("id"));g.show();a.set("collapsed",false)}},bindUI:function(){var a=this;this.get("menu").on("afterActiveItemChange",
function(c){a.set("activeItem",c.newVal)})},_handleKeydown:function(a){var c=this.get("menu");c&&c.get("visible")&&c._handleKeydown(a);if(a.keyCode==27){a.preventDefault();this._hideMenu()}else if(a.keyCode==38||a.keyCode==40)if(!c.get("visible")){a.preventDefault();this._showMenu()}},_handleBlur:function(){var a=d.superclass._handleBlur.call(this);if(a===false)return a;this._hideMenu()},_handleClick:function(){var a=d.superclass._handleClick.call(this);if(a===false)return a;this.get("menu").get("visible")?
this._hideMenu():this._showMenu()}},{ATTRS:{activeItem:{view:true},menu:{setter:function(a){a.set("focusable",false)}}}});d.DefaultRender=b;return d},{requires:["uibase","button","./menubuttonrender"]});
KISSY.add("menubutton/menubuttonrender",function(h,e,f){return e.create(f.Render,{renderUI:function(){var b=this.get("el");b.one("div").one("div").html(h.substitute('<div class="goog-inline-block {prefixCls}-caption"></div><div class="goog-inline-block {prefixCls}-dropdown">&nbsp;</div>',{prefixCls:this.get("prefixCls")+"menu-button"}));b.attr("aria-haspopup",true)},_uiSetContent:function(b){b!=undefined&&this.get("el").one("."+this.get("prefixCls")+"menu-button-caption").html(b)},_uiSetCollapsed:function(b){var d=
this.get("el"),a=this.get("prefixCls")+"menu-button";if(b){d.removeClass(a+"menu-button-open");d.attr("aria-expanded",false)}else{d.addClass(a+"menu-button-open");d.attr("aria-expanded",true)}},_uiSetActiveItem:function(b){this.get("el").attr("aria-activedescendant",b&&b.get("view").get("el").attr("id")||"")}},{ATTRS:{activeItem:{},collapsed:{value:true}}})},{requires:["uibase","button"]});KISSY.add("menubutton",function(h,e,f){e.Render=f;return e},{requires:["menubutton/menubutton","menubutton/menubuttonrender"]});
