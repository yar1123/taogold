KISSY.add("taogold/dialog",function(e,m,j){function h(a){this._config=e.merge({width:900,title:"\u5bee\u7470\u56ad\u705e\ufffd",closeBtn:1},a);this._render()}var c=e.DOM,f=e.Event,k=document,i=new j;e.augment(h,e.EventTarget,{show:function(){var a=this;a._el.style.display="block";setTimeout(function(){a._setPosition()},0);i.show();a._visible=1;a.fire("show")},hide:function(){this._el.style.display="none";i.hide();this._visible=0;this.fire("hide")},refreshContent:function(a){this._bdEl.innerHTML="";this.appendContent(a)},
appendContent:function(a){var b=this._bdEl,d=b.innerHTML;if(e.isString(a))b.innerHTML=d+a;else b.appendChild(a)},_render:function(){var a=this,b=a._config,d=b.type,g="";if(d=="alert"||d=="confirm"){g='<div class="box-ft"><button class="confirm-btn" type="button">\u786e\u5b9a</button>';if(d=="confirm")g+='<button class="cancel-btn" type="button">\u53d6\u6d88</button>';g+="</div>"}a._el=c.create('<div class="overlay box box-padding" style="display:none;position:absolute;width:'+b.width+'px;z-index:10000;"><div class="box-hd"><h3 class="box-title">'+
b.title+"</h3>"+(b.closeBtn?'<div class="box-act"><a class="box-close" href="#">\u5173\u95ed</a></div>':"")+'</div><div class="box-bd"></div>'+g+"</div>");e.ready(function(){k.body.appendChild(a._el)});a._titleEl=c.get(".box-title",a._el);if(b.closeBtn){a._closeEl=c.get(".box-close",a._el);f.on(a._closeEl,"click",function(l){l.preventDefault();a.hide()})}a._bdEl=c.get(".box-bd",a._el);if(d=="alert"||d=="confirm"){a._confirmBtnEl=c.get(".confirm-btn",a._el);f.on(a._confirmBtnEl,"click",function(){a.hide();a.fire("confirm")});
if(d=="confirm"){a._cancelBtnEl=c.get(".cancel-btn",a._el);f.on(a._cancelBtnEl,"click",function(){a.hide();a.fire("cancel")})}}f.on(window,"resize",function(){a._setPosition()})},_setPosition:function(){var a=(c.viewportWidth()-this._el.offsetWidth)/2,b=c.scrollTop()+(c.viewportHeight()-this._el.offsetHeight)/2;this._el.style.left=(a>0?a:0)+"px";this._el.style.top=(b>0?b:0)+"px"}});return h},{requires:["overlay","taogold/mask"]});
